(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{29:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),a=n.n(s),c=(n(29),n(16)),i=n.n(c),u=n(4),o=n(11),j=n(6),l=n(3),d=(n(37),n(9)),b=n.n(d),p=n(12),O=n(25),f=n.n(O);function h(e){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(b.a.mark((function e(t){var n,r,s,a,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=c.length>1&&void 0!==c[1]?c[1]:{}).method=n.method||"GET",n.headers=n.headers||{},"GET"!==n.method.toUpperCase()&&(n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.headers["XSRF-Token"]=f.a.get("XSRF-TOKEN")),e.next=6,window.fetch(t,n);case 6:if(r=e.sent,!(s=r.headers.get("content-type"))||!s.includes("application/json")){e.next=13;break}return e.next=11,r.json();case 11:a=e.sent,r.data=a;case 13:if(!(r.status>=400)){e.next=15;break}throw r;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x="session/setUser",v="session/removeUser",g=function(e){return{type:x,payload:e}},w=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return(e=Object.assign({},t)).user=n.payload,e;case v:return(e=Object.assign({},t)).user=null,e;default:return t}},y=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user})),n=Object(s.useState)([]),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(s.useState)(""),d=Object(j.a)(o,2),O=d[0],f=d[1],m=Object(s.useState)(""),x=Object(j.a)(m,2),v=x[0],w=x[1];if(t)return Object(r.jsx)(l.a,{to:"/"});return Object(r.jsx)("div",{className:"main-container",children:Object(r.jsx)("form",{className:"login-form",onSubmit:function(t){return t.preventDefault(),i([]),e((n={credential:O,password:v},function(){var e=Object(p.a)(b.a.mark((function e(t){var r,s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.credential,s=n.password,e.next=3,h("/api/session",{method:"POST",body:JSON.stringify({credential:r,password:s})});case 3:return a=e.sent,t(g(a.data.user)),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){e.data&&e.data.errors&&i(e.data.errors)}));var n},children:Object(r.jsxs)("div",{className:"login-container",children:[Object(r.jsx)("ul",{className:"loginErrors-ul",children:c.map((function(e,t){return Object(r.jsx)("div",{className:"loginErrors-div",children:e},t)}))}),Object(r.jsxs)("div",{className:"usernamefields",children:[Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"i.e. John123",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(r.jsxs)("div",{className:"passwordfields",children:[Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)("input",{type:"password",name:"password",id:"password",value:v,onChange:function(e){return w(e.target.value)}})]}),Object(r.jsx)("button",{className:"login-button",type:"submit",children:"Log In"})]})})})},N=(n(40),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user})),n=Object(s.useState)([]),a=Object(j.a)(n,2),c=a[0],i=a[1],o=Object(s.useState)(""),d=Object(j.a)(o,2),O=d[0],f=d[1],m=Object(s.useState)(""),x=Object(j.a)(m,2),v=x[0],w=x[1],y=Object(s.useState)(""),N=Object(j.a)(y,2),S=N[0],E=N[1],k=Object(s.useState)(""),C=Object(j.a)(k,2),T=C[0],L=C[1];if(t)return Object(r.jsx)(l.a,{to:"/"});return Object(r.jsx)("div",{className:"main-container",children:Object(r.jsx)("form",{className:"signup-form",onSubmit:function(t){return t.preventDefault(),S===T?(i([]),e((n={email:v,username:O,password:S},function(){var e=Object(p.a)(b.a.mark((function e(t){var r,s,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,s=n.password,a=n.email,e.next=3,h("/api/users",{method:"POST",body:JSON.stringify({username:r,email:a,password:s})});case 3:return c=e.sent,t(g(c.data.user)),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){e.data&&e.data.errors&&i(e.data.errors)}))):i(["Password and Confirm Password must match"]);var n},children:Object(r.jsxs)("div",{className:"signup-container",children:[Object(r.jsx)("ul",{className:"signupErrors-ul",children:c.map((function(e,t){return Object(r.jsx)("div",{className:"signupErrors-div",children:e},t)}))}),Object(r.jsxs)("div",{className:"usernamefields",children:[Object(r.jsx)("label",{children:"Username"}),Object(r.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"i.e. John123",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(r.jsxs)("div",{className:"emailfields",children:[Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{type:"email",name:"email",id:"email",value:v,placeholder:"example@example.com",onChange:function(e){return w(e.target.value)}})]}),Object(r.jsxs)("div",{className:"passwordfields",children:[Object(r.jsx)("label",{children:"Password"}),Object(r.jsx)("input",{type:"password",name:"password",id:"password",value:S,onChange:function(e){return E(e.target.value)}})]}),Object(r.jsxs)("div",{className:"confirm-passwordfields",children:[Object(r.jsx)("label",{children:"Confirm Password"}),Object(r.jsx)("input",{type:"password",name:"confirm-password",id:"confirm-password",value:T,onChange:function(e){return L(e.target.value)}})]}),Object(r.jsx)("button",{className:"signup-button",type:"submit",children:"Signup"})]})})})});var S=function(e){var t=e.user,n=Object(u.b)(),a=Object(s.useState)(!1),c=Object(j.a)(a,2),i=c[0],o=c[1];return Object(s.useEffect)((function(){if(i){var e=function(){o(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[i]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){i||o(!0)},children:Object(r.jsx)("i",{className:"fas fa-user-circle"})}),i&&Object(r.jsxs)("ul",{className:"profile-dropdown",children:[Object(r.jsx)("li",{children:t.username}),Object(r.jsx)("li",{children:t.email}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),n(function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/api/session",{method:"DELETE"});case 2:return n=e.sent,t({type:v}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})})]})]})},E=(n(41),function(e){var t,n=e.isLoaded,s=Object(u.c)((function(e){return e.session.user}));return t=s?Object(r.jsx)(S,{user:s}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.b,{to:"/login",children:"Log In"}),Object(r.jsx)(o.b,{to:"/signup",children:"Sign Up"})]}),Object(r.jsx)("ul",{children:Object(r.jsxs)("li",{children:[Object(r.jsx)(o.b,{exact:!0,to:"/",children:"Home"}),n&&t]})})});var k,C=function(){var e=Object(u.b)(),t=Object(s.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1];return Object(s.useEffect)((function(){e(function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/api/session");case 2:return n=e.sent,t(g(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return c(!0)}))}),[e]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(E,{isLoaded:a}),a&&Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/login",children:Object(r.jsx)(y,{})}),Object(r.jsx)(l.b,{path:"/signup",children:Object(r.jsx)(N,{})})]})]})},T=n(14),L=n(26),P=Object(T.c)({session:w});k=Object(T.a)(L.a);var J=function(e){return Object(T.d)(P,e,k)}();var U=function(){return Object(r.jsx)(u.a,{store:J,children:Object(r.jsx)(o.a,{children:Object(r.jsx)(C,{})})})};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(U,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.811fd634.chunk.js.map